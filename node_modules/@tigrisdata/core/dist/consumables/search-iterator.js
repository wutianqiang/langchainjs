"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SearchIterator = exports.SearchIndexIteratorInitializer = exports.SearchIteratorInitializer = void 0;
const iterable_stream_1 = require("./iterable-stream");
const search_1 = require("../search");
/** @internal */
class SearchIteratorInitializer {
    constructor(client, request) {
        this._client = client;
        this._request = request;
    }
    init() {
        return this._client.search(this._request);
    }
}
exports.SearchIteratorInitializer = SearchIteratorInitializer;
/** @internal */
class SearchIndexIteratorInitializer {
    constructor(client, request) {
        this._client = client;
        this._request = request;
    }
    init() {
        return this._client.search(this._request);
    }
}
exports.SearchIndexIteratorInitializer = SearchIndexIteratorInitializer;
/**
 * Iterator to supplement search() queries
 */
class SearchIterator extends iterable_stream_1.IterableStream {
    constructor(initializer, config) {
        super(initializer);
        this._config = config;
    }
    /** @override */
    _transform(message) {
        return search_1.SearchResult.from(message, this._config);
    }
}
exports.SearchIterator = SearchIterator;

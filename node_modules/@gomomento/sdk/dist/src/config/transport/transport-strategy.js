"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StaticTransportStrategy = exports.StaticGrpcConfiguration = void 0;
class StaticGrpcConfiguration {
    constructor(props) {
        this.deadlineMillis = props.deadlineMillis;
        this.maxSessionMemoryMb = props.maxSessionMemoryMb;
    }
    getDeadlineMillis() {
        return this.deadlineMillis;
    }
    getMaxSessionMemoryMb() {
        return this.maxSessionMemoryMb;
    }
    withDeadlineMillis(deadlineMillis) {
        return new StaticGrpcConfiguration({
            deadlineMillis: deadlineMillis,
            maxSessionMemoryMb: this.maxSessionMemoryMb,
        });
    }
    withMaxSessionMemoryMb(maxSessionMemoryMb) {
        return new StaticGrpcConfiguration({
            deadlineMillis: this.deadlineMillis,
            maxSessionMemoryMb: maxSessionMemoryMb,
        });
    }
}
exports.StaticGrpcConfiguration = StaticGrpcConfiguration;
class StaticTransportStrategy {
    constructor(props) {
        this.grpcConfig = props.grpcConfiguration;
        this.maxIdleMillis = props.maxIdleMillis;
    }
    getGrpcConfig() {
        return this.grpcConfig;
    }
    withGrpcConfig(grpcConfig) {
        return new StaticTransportStrategy({
            grpcConfiguration: grpcConfig,
            maxIdleMillis: this.maxIdleMillis,
        });
    }
    getMaxIdleMillis() {
        return this.maxIdleMillis;
    }
    withMaxIdleMillis(maxIdleMillis) {
        return new StaticTransportStrategy({
            grpcConfiguration: this.grpcConfig,
            maxIdleMillis: maxIdleMillis,
        });
    }
    withClientTimeoutMillis(clientTimeout) {
        return new StaticTransportStrategy({
            grpcConfiguration: this.grpcConfig.withDeadlineMillis(clientTimeout),
            maxIdleMillis: this.maxIdleMillis,
        });
    }
}
exports.StaticTransportStrategy = StaticTransportStrategy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNwb3J0LXN0cmF0ZWd5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbmZpZy90cmFuc3BvcnQvdHJhbnNwb3J0LXN0cmF0ZWd5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQTREQSxNQUFhLHVCQUF1QjtJQUdsQyxZQUFZLEtBQTZCO1FBQ3ZDLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQztRQUMzQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLGtCQUFrQixDQUFDO0lBQ3JELENBQUM7SUFFRCxpQkFBaUI7UUFDZixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDN0IsQ0FBQztJQUVELHFCQUFxQjtRQUNuQixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUNqQyxDQUFDO0lBRUQsa0JBQWtCLENBQUMsY0FBc0I7UUFDdkMsT0FBTyxJQUFJLHVCQUF1QixDQUFDO1lBQ2pDLGNBQWMsRUFBRSxjQUFjO1lBQzlCLGtCQUFrQixFQUFFLElBQUksQ0FBQyxrQkFBa0I7U0FDNUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHNCQUFzQixDQUFDLGtCQUEwQjtRQUMvQyxPQUFPLElBQUksdUJBQXVCLENBQUM7WUFDakMsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjO1lBQ25DLGtCQUFrQixFQUFFLGtCQUFrQjtTQUN2QyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUE3QkQsMERBNkJDO0FBRUQsTUFBYSx1QkFBdUI7SUFJbEMsWUFBWSxLQUE2QjtRQUN2QyxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztRQUMxQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7SUFDM0MsQ0FBQztJQUVELGFBQWE7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELGNBQWMsQ0FBQyxVQUE2QjtRQUMxQyxPQUFPLElBQUksdUJBQXVCLENBQUM7WUFDakMsaUJBQWlCLEVBQUUsVUFBVTtZQUM3QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7U0FDbEMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGdCQUFnQjtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBRUQsaUJBQWlCLENBQUMsYUFBcUI7UUFDckMsT0FBTyxJQUFJLHVCQUF1QixDQUFDO1lBQ2pDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxVQUFVO1lBQ2xDLGFBQWEsRUFBRSxhQUFhO1NBQzdCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCx1QkFBdUIsQ0FBQyxhQUFxQjtRQUMzQyxPQUFPLElBQUksdUJBQXVCLENBQUM7WUFDakMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUM7WUFDcEUsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1NBQ2xDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQXJDRCwwREFxQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0dycGNDb25maWd1cmF0aW9uLCBHcnBjQ29uZmlndXJhdGlvblByb3BzfSBmcm9tICcuL2dycGMtY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0U3RyYXRlZ3kge1xuICAvKipcbiAgICogQ29uZmlndXJlcyB0aGUgbG93LWxldmVsIGdSUEMgc2V0dGluZ3MgZm9yIHRoZSBNb21lbnRvIGNsaWVudCdzIGNvbW11bmljYXRpb25cbiAgICogd2l0aCB0aGUgTW9tZW50byBzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIHtHcnBjQ29uZmlndXJhdGlvbn1cbiAgICovXG4gIGdldEdycGNDb25maWcoKTogR3JwY0NvbmZpZ3VyYXRpb247XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgZm9yIG92ZXJyaWRpbmcgdGhlIGdSUEMgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0ge0dycGNDb25maWd1cmF0aW9ufSBncnBjQ29uZmlnXG4gICAqIEByZXR1cm5zIHtUcmFuc3BvcnRTdHJhdGVneX0gYSBuZXcgVHJhbnNwb3J0U3RyYXRlZ3kgd2l0aCB0aGUgc3BlY2lmaWVkIGdSUEMgY29uZmlnLlxuICAgKi9cbiAgd2l0aEdycGNDb25maWcoZ3JwY0NvbmZpZzogR3JwY0NvbmZpZ3VyYXRpb24pOiBUcmFuc3BvcnRTdHJhdGVneTtcblxuICAvKipcbiAgICogQ29weSBjb25zdHJ1Y3RvciB0byB1cGRhdGUgdGhlIGNsaWVudC1zaWRlIHRpbWVvdXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsaWVudFRpbWVvdXRNaWxsaXNcbiAgICogQHJldHVybnMge1RyYW5zcG9ydFN0cmF0ZWd5fSBhIG5ldyBUcmFuc3BvcnRTdHJhdGVneSB3aXRoIHRoZSBzcGVjaWZpZWQgY2xpZW50IHRpbWVvdXRcbiAgICovXG4gIHdpdGhDbGllbnRUaW1lb3V0TWlsbGlzKGNsaWVudFRpbWVvdXRNaWxsaXM6IG51bWJlcik6IFRyYW5zcG9ydFN0cmF0ZWd5O1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBkdXJhdGlvbiBmb3Igd2hpY2ggYSBjb25uZWN0aW9uIG1heSByZW1haW4gaWRsZSBiZWZvcmUgYmVpbmcgcmVwbGFjZWQuICBUaGlzXG4gICAqIHNldHRpbmcgY2FuIGJlIHVzZWQgdG8gZm9yY2UgcmUtY29ubmVjdGlvbiBvZiBhIGNsaWVudCBpZiBpdCBoYXMgYmVlbiBpZGxlIGZvciB0b28gbG9uZy5cbiAgICogSW4gZW52aXJvbm1lbnRzIHN1Y2ggYXMgQVdTIGxhbWJkYSwgaWYgdGhlIGxhbWJkYSBpcyBzdXNwZW5kZWQgZm9yIHRvbyBsb25nIHRoZSBjb25uZWN0aW9uXG4gICAqIG1heSBiZSBjbG9zZWQgYnkgdGhlIGxvYWQgYmFsYW5jZXIsIHJlc3VsdGluZyBpbiBhbiBlcnJvciBvbiB0aGUgc3Vic2VxdWVudCByZXF1ZXN0LiAgSWZcbiAgICogdGhpcyBzZXR0aW5nIGlzIHNldCB0byBhIGR1cmF0aW9uIGxlc3MgdGhhbiB0aGUgbG9hZCBiYWxhbmNlciB0aW1lb3V0LCB3ZSBjYW4gZW5zdXJlIHRoYXRcbiAgICogdGhlIGNvbm5lY3Rpb24gd2lsbCBiZSByZWZyZXNoZWQgdG8gYXZvaWQgZXJyb3JzLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TWF4SWRsZU1pbGxpcygpOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgdG8gdXBkYXRlIHRoZSBtYXggaWRsZSBjb25uZWN0aW9uIHRpbWVvdXQuICAoU2VlIHtnZXRNYXhJZGxlTWlsbGlzfS4pXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhJZGxlTWlsbGlzXG4gICAqIEByZXR1cm5zIHtUcmFuc3BvcnRTdHJhdGVneX0gYSBuZXcgVHJhbnNwb3J0U3RyYXRlZ3kgd2l0aCB0aGUgc3BlY2lmaWVkIG1heCBpZGxlIGNvbm5lY3Rpb24gdGltZW91dC5cbiAgICovXG4gIHdpdGhNYXhJZGxlTWlsbGlzKG1heElkbGVNaWxsaXM6IG51bWJlcik6IFRyYW5zcG9ydFN0cmF0ZWd5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydFN0cmF0ZWd5UHJvcHMge1xuICAvKipcbiAgICogbG93LWxldmVsIGdSUEMgc2V0dGluZ3MgZm9yIGNvbW11bmljYXRpb24gd2l0aCB0aGUgTW9tZW50byBzZXJ2ZXJcbiAgICovXG4gIGdycGNDb25maWd1cmF0aW9uOiBHcnBjQ29uZmlndXJhdGlvbjtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIGR1cmF0aW9uIGZvciB3aGljaCBhIGNvbm5lY3Rpb24gbWF5IHJlbWFpbiBpZGxlIGJlZm9yZSBiZWluZyByZXBsYWNlZC4gIFRoaXNcbiAgICogc2V0dGluZyBjYW4gYmUgdXNlZCB0byBmb3JjZSByZS1jb25uZWN0aW9uIG9mIGEgY2xpZW50IGlmIGl0IGhhcyBiZWVuIGlkbGUgZm9yIHRvbyBsb25nLlxuICAgKiBJbiBlbnZpcm9ubWVudHMgc3VjaCBhcyBBV1MgbGFtYmRhLCBpZiB0aGUgbGFtYmRhIGlzIHN1c3BlbmRlZCBmb3IgdG9vIGxvbmcgdGhlIGNvbm5lY3Rpb25cbiAgICogbWF5IGJlIGNsb3NlZCBieSB0aGUgbG9hZCBiYWxhbmNlciwgcmVzdWx0aW5nIGluIGFuIGVycm9yIG9uIHRoZSBzdWJzZXF1ZW50IHJlcXVlc3QuICBJZlxuICAgKiB0aGlzIHNldHRpbmcgaXMgc2V0IHRvIGEgZHVyYXRpb24gbGVzcyB0aGFuIHRoZSBsb2FkIGJhbGFuY2VyIHRpbWVvdXQsIHdlIGNhbiBlbnN1cmUgdGhhdFxuICAgKiB0aGUgY29ubmVjdGlvbiB3aWxsIGJlIHJlZnJlc2hlZCB0byBhdm9pZCBlcnJvcnMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtYXhJZGxlTWlsbGlzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0aWNHcnBjQ29uZmlndXJhdGlvbiBpbXBsZW1lbnRzIEdycGNDb25maWd1cmF0aW9uIHtcbiAgcHJpdmF0ZSByZWFkb25seSBkZWFkbGluZU1pbGxpczogbnVtYmVyO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heFNlc3Npb25NZW1vcnlNYjogbnVtYmVyO1xuICBjb25zdHJ1Y3Rvcihwcm9wczogR3JwY0NvbmZpZ3VyYXRpb25Qcm9wcykge1xuICAgIHRoaXMuZGVhZGxpbmVNaWxsaXMgPSBwcm9wcy5kZWFkbGluZU1pbGxpcztcbiAgICB0aGlzLm1heFNlc3Npb25NZW1vcnlNYiA9IHByb3BzLm1heFNlc3Npb25NZW1vcnlNYjtcbiAgfVxuXG4gIGdldERlYWRsaW5lTWlsbGlzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZGVhZGxpbmVNaWxsaXM7XG4gIH1cblxuICBnZXRNYXhTZXNzaW9uTWVtb3J5TWIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tYXhTZXNzaW9uTWVtb3J5TWI7XG4gIH1cblxuICB3aXRoRGVhZGxpbmVNaWxsaXMoZGVhZGxpbmVNaWxsaXM6IG51bWJlcik6IFN0YXRpY0dycGNDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IFN0YXRpY0dycGNDb25maWd1cmF0aW9uKHtcbiAgICAgIGRlYWRsaW5lTWlsbGlzOiBkZWFkbGluZU1pbGxpcyxcbiAgICAgIG1heFNlc3Npb25NZW1vcnlNYjogdGhpcy5tYXhTZXNzaW9uTWVtb3J5TWIsXG4gICAgfSk7XG4gIH1cblxuICB3aXRoTWF4U2Vzc2lvbk1lbW9yeU1iKG1heFNlc3Npb25NZW1vcnlNYjogbnVtYmVyKTogU3RhdGljR3JwY0NvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiBuZXcgU3RhdGljR3JwY0NvbmZpZ3VyYXRpb24oe1xuICAgICAgZGVhZGxpbmVNaWxsaXM6IHRoaXMuZGVhZGxpbmVNaWxsaXMsXG4gICAgICBtYXhTZXNzaW9uTWVtb3J5TWI6IG1heFNlc3Npb25NZW1vcnlNYixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdGljVHJhbnNwb3J0U3RyYXRlZ3kgaW1wbGVtZW50cyBUcmFuc3BvcnRTdHJhdGVneSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZ3JwY0NvbmZpZzogR3JwY0NvbmZpZ3VyYXRpb247XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4SWRsZU1pbGxpczogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBUcmFuc3BvcnRTdHJhdGVneVByb3BzKSB7XG4gICAgdGhpcy5ncnBjQ29uZmlnID0gcHJvcHMuZ3JwY0NvbmZpZ3VyYXRpb247XG4gICAgdGhpcy5tYXhJZGxlTWlsbGlzID0gcHJvcHMubWF4SWRsZU1pbGxpcztcbiAgfVxuXG4gIGdldEdycGNDb25maWcoKTogR3JwY0NvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLmdycGNDb25maWc7XG4gIH1cblxuICB3aXRoR3JwY0NvbmZpZyhncnBjQ29uZmlnOiBHcnBjQ29uZmlndXJhdGlvbik6IFN0YXRpY1RyYW5zcG9ydFN0cmF0ZWd5IHtcbiAgICByZXR1cm4gbmV3IFN0YXRpY1RyYW5zcG9ydFN0cmF0ZWd5KHtcbiAgICAgIGdycGNDb25maWd1cmF0aW9uOiBncnBjQ29uZmlnLFxuICAgICAgbWF4SWRsZU1pbGxpczogdGhpcy5tYXhJZGxlTWlsbGlzLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0TWF4SWRsZU1pbGxpcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1heElkbGVNaWxsaXM7XG4gIH1cblxuICB3aXRoTWF4SWRsZU1pbGxpcyhtYXhJZGxlTWlsbGlzOiBudW1iZXIpOiBUcmFuc3BvcnRTdHJhdGVneSB7XG4gICAgcmV0dXJuIG5ldyBTdGF0aWNUcmFuc3BvcnRTdHJhdGVneSh7XG4gICAgICBncnBjQ29uZmlndXJhdGlvbjogdGhpcy5ncnBjQ29uZmlnLFxuICAgICAgbWF4SWRsZU1pbGxpczogbWF4SWRsZU1pbGxpcyxcbiAgICB9KTtcbiAgfVxuXG4gIHdpdGhDbGllbnRUaW1lb3V0TWlsbGlzKGNsaWVudFRpbWVvdXQ6IG51bWJlcik6IFN0YXRpY1RyYW5zcG9ydFN0cmF0ZWd5IHtcbiAgICByZXR1cm4gbmV3IFN0YXRpY1RyYW5zcG9ydFN0cmF0ZWd5KHtcbiAgICAgIGdycGNDb25maWd1cmF0aW9uOiB0aGlzLmdycGNDb25maWcud2l0aERlYWRsaW5lTWlsbGlzKGNsaWVudFRpbWVvdXQpLFxuICAgICAgbWF4SWRsZU1pbGxpczogdGhpcy5tYXhJZGxlTWlsbGlzLFxuICAgIH0pO1xuICB9XG59XG4iXX0=
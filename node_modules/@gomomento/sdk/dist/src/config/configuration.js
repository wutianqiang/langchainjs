"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CacheConfiguration = void 0;
class CacheConfiguration {
    constructor(props) {
        this.loggerFactory = props.loggerFactory;
        this.retryStrategy = props.retryStrategy;
        this.transportStrategy = props.transportStrategy;
        this.middlewares = props.middlewares;
    }
    getLoggerFactory() {
        return this.loggerFactory;
    }
    getRetryStrategy() {
        return this.retryStrategy;
    }
    withRetryStrategy(retryStrategy) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: this.middlewares,
        });
    }
    getTransportStrategy() {
        return this.transportStrategy;
    }
    withTransportStrategy(transportStrategy) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: transportStrategy,
            middlewares: this.middlewares,
        });
    }
    getMiddlewares() {
        return this.middlewares;
    }
    withMiddlewares(middlewares) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: middlewares,
        });
    }
    addMiddleware(middleware) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: [middleware, ...this.middlewares],
        });
    }
    withClientTimeoutMillis(clientTimeout) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy.withClientTimeoutMillis(clientTimeout),
            middlewares: this.middlewares,
        });
    }
}
exports.CacheConfiguration = CacheConfiguration;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb25maWcvY29uZmlndXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUF1RkEsTUFBYSxrQkFBa0I7SUFNN0IsWUFBWSxLQUF5QjtRQUNuQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsaUJBQWlCLENBQUM7UUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVELGdCQUFnQjtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBRUQsaUJBQWlCLENBQUMsYUFBNEI7UUFDNUMsT0FBTyxJQUFJLGtCQUFrQixDQUFDO1lBQzVCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxhQUFhLEVBQUUsYUFBYTtZQUM1QixpQkFBaUIsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQ3pDLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQ2hDLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxpQkFBb0M7UUFDeEQsT0FBTyxJQUFJLGtCQUFrQixDQUFDO1lBQzVCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsaUJBQWlCLEVBQUUsaUJBQWlCO1lBQ3BDLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUMxQixDQUFDO0lBRUQsZUFBZSxDQUFDLFdBQXlCO1FBQ3ZDLE9BQU8sSUFBSSxrQkFBa0IsQ0FBQztZQUM1QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7WUFDekMsV0FBVyxFQUFFLFdBQVc7U0FDekIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGFBQWEsQ0FBQyxVQUFzQjtRQUNsQyxPQUFPLElBQUksa0JBQWtCLENBQUM7WUFDNUIsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQ3pDLFdBQVcsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7U0FDL0MsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHVCQUF1QixDQUFDLGFBQXFCO1FBQzNDLE9BQU8sSUFBSSxrQkFBa0IsQ0FBQztZQUM1QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGlCQUFpQixFQUNmLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyx1QkFBdUIsQ0FBQyxhQUFhLENBQUM7WUFDL0QsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO1NBQzlCLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQTFFRCxnREEwRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JldHJ5U3RyYXRlZ3l9IGZyb20gJy4vcmV0cnkvcmV0cnktc3RyYXRlZ3knO1xuaW1wb3J0IHtNaWRkbGV3YXJlfSBmcm9tICcuL21pZGRsZXdhcmUvbWlkZGxld2FyZSc7XG5pbXBvcnQge01vbWVudG9Mb2dnZXJGYWN0b3J5fSBmcm9tICcuLi8nO1xuaW1wb3J0IHtUcmFuc3BvcnRTdHJhdGVneX0gZnJvbSAnLi90cmFuc3BvcnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb25Qcm9wcyB7XG4gIC8qKlxuICAgKiBDb25maWd1cmVzIGxvZ2dpbmcgdmVyYm9zaXR5IGFuZCBmb3JtYXRcbiAgICovXG4gIGxvZ2dlckZhY3Rvcnk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5O1xuICAvKipcbiAgICogQ29uZmlndXJlcyBob3cgYW5kIHdoZW4gZmFpbGVkIHJlcXVlc3RzIHdpbGwgYmUgcmV0cmllZFxuICAgKi9cbiAgcmV0cnlTdHJhdGVneTogUmV0cnlTdHJhdGVneTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgbG93LWxldmVsIG9wdGlvbnMgZm9yIG5ldHdvcmsgaW50ZXJhY3Rpb25zIHdpdGggdGhlIE1vbWVudG8gc2VydmljZVxuICAgKi9cbiAgdHJhbnNwb3J0U3RyYXRlZ3k6IFRyYW5zcG9ydFN0cmF0ZWd5O1xuICAvKipcbiAgICogQ29uZmlndXJlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyB0aGF0IHdpbGwgd3JhcCBlYWNoIHJlcXVlc3RcbiAgICovXG4gIG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlW107XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBNb21lbnRvIFNpbXBsZSBDYWNoZSBjbGllbnQuXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlndXJhdGlvbiB7XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7TW9tZW50b0xvZ2dlckZhY3Rvcnl9IHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgbG9nZ2luZyB2ZXJib3NpdHkgYW5kIGZvcm1hdFxuICAgKi9cbiAgZ2V0TG9nZ2VyRmFjdG9yeSgpOiBNb21lbnRvTG9nZ2VyRmFjdG9yeTtcblxuICAvKipcbiAgICogQHJldHVybnMge1JldHJ5U3RyYXRlZ3l9IHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgaG93IGFuZCB3aGVuIGZhaWxlZCByZXF1ZXN0cyB3aWxsIGJlIHJldHJpZWRcbiAgICovXG4gIGdldFJldHJ5U3RyYXRlZ3koKTogUmV0cnlTdHJhdGVneTtcblxuICAvKipcbiAgICogQ29weSBjb25zdHJ1Y3RvciBmb3Igb3ZlcnJpZGluZyBSZXRyeVN0cmF0ZWd5XG4gICAqIEBwYXJhbSB7UmV0cnlTdHJhdGVneX0gcmV0cnlTdHJhdGVneVxuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIFJldHJ5U3RyYXRlZ3lcbiAgICovXG4gIHdpdGhSZXRyeVN0cmF0ZWd5KHJldHJ5U3RyYXRlZ3k6IFJldHJ5U3RyYXRlZ3kpOiBDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7VHJhbnNwb3J0U3RyYXRlZ3l9IHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3Igd2lyZSBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgTW9tZW50byBzZXJ2aWNlXG4gICAqL1xuICBnZXRUcmFuc3BvcnRTdHJhdGVneSgpOiBUcmFuc3BvcnRTdHJhdGVneTtcblxuICAvKipcbiAgICogQ29weSBjb25zdHJ1Y3RvciBmb3Igb3ZlcnJpZGluZyBUcmFuc3BvcnRTdHJhdGVneVxuICAgKiBAcGFyYW0ge1RyYW5zcG9ydFN0cmF0ZWd5fSB0cmFuc3BvcnRTdHJhdGVneVxuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIFRyYW5zcG9ydFN0cmF0ZWd5XG4gICAqL1xuICB3aXRoVHJhbnNwb3J0U3RyYXRlZ3kodHJhbnNwb3J0U3RyYXRlZ3k6IFRyYW5zcG9ydFN0cmF0ZWd5KTogQ29uZmlndXJhdGlvbjtcblxuICAvKipcbiAgICogQHJldHVybnMge01pZGRsZXdhcmVbXX0gdGhlIG1pZGRsZXdhcmUgZnVuY3Rpb25zIHRoYXQgd2lsbCB3cmFwIGVhY2ggcmVxdWVzdFxuICAgKi9cbiAgZ2V0TWlkZGxld2FyZXMoKTogTWlkZGxld2FyZVtdO1xuXG4gIC8qKlxuICAgKiBDb3B5IGNvbnN0cnVjdG9yIGZvciBvdmVycmlkaW5nIE1pZGRsZXdhcmVzXG4gICAqIEBwYXJhbSB7TWlkZGxld2FyZVtdfSBtaWRkbGV3YXJlc1xuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIE1pZGRsZXdhcmVzXG4gICAqL1xuICB3aXRoTWlkZGxld2FyZXMobWlkZGxld2FyZXM6IE1pZGRsZXdhcmVbXSk6IENvbmZpZ3VyYXRpb247XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgdGhhdCBhZGRzIGEgc2luZ2xlIG1pZGRsZXdhcmUgdG8gdGhlIGV4aXN0aW5nIG1pZGRsZXdhcmVzXG4gICAqIEBwYXJhbSB7TWlkZGxld2FyZX0gbWlkZGxld2FyZVxuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIE1pZGRsZXdhcmUgYXBwZW5kZWQgdG8gdGhlIGxpc3Qgb2YgZXhpc3RpbmcgTWlkZGxld2FyZXNcbiAgICovXG4gIGFkZE1pZGRsZXdhcmUobWlkZGxld2FyZTogTWlkZGxld2FyZSk6IENvbmZpZ3VyYXRpb247XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGNvcHkgY29uc3RydWN0b3IgdGhhdCB1cGRhdGVzIHRoZSBjbGllbnQtc2lkZSB0aW1lb3V0IHNldHRpbmcgaW4gdGhlIFRyYW5zcG9ydFN0cmF0ZWd5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbGllbnRUaW1lb3V0TWlsbGlzXG4gICAqIEByZXR1cm5zIHtDb25maWd1cmF0aW9ufSBhIG5ldyBDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGl0cyBUcmFuc3BvcnRTdHJhdGVneSB1cGRhdGVkIHRvIHVzZSB0aGUgc3BlY2lmaWVkIGNsaWVudCB0aW1lb3V0XG4gICAqL1xuICB3aXRoQ2xpZW50VGltZW91dE1pbGxpcyhjbGllbnRUaW1lb3V0TWlsbGlzOiBudW1iZXIpOiBDb25maWd1cmF0aW9uO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FjaGVDb25maWd1cmF0aW9uIGltcGxlbWVudHMgQ29uZmlndXJhdGlvbiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyRmFjdG9yeTogTW9tZW50b0xvZ2dlckZhY3Rvcnk7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmV0cnlTdHJhdGVneTogUmV0cnlTdHJhdGVneTtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmFuc3BvcnRTdHJhdGVneTogVHJhbnNwb3J0U3RyYXRlZ3k7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWlkZGxld2FyZXM6IE1pZGRsZXdhcmVbXTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogQ29uZmlndXJhdGlvblByb3BzKSB7XG4gICAgdGhpcy5sb2dnZXJGYWN0b3J5ID0gcHJvcHMubG9nZ2VyRmFjdG9yeTtcbiAgICB0aGlzLnJldHJ5U3RyYXRlZ3kgPSBwcm9wcy5yZXRyeVN0cmF0ZWd5O1xuICAgIHRoaXMudHJhbnNwb3J0U3RyYXRlZ3kgPSBwcm9wcy50cmFuc3BvcnRTdHJhdGVneTtcbiAgICB0aGlzLm1pZGRsZXdhcmVzID0gcHJvcHMubWlkZGxld2FyZXM7XG4gIH1cblxuICBnZXRMb2dnZXJGYWN0b3J5KCk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5IHtcbiAgICByZXR1cm4gdGhpcy5sb2dnZXJGYWN0b3J5O1xuICB9XG5cbiAgZ2V0UmV0cnlTdHJhdGVneSgpOiBSZXRyeVN0cmF0ZWd5IHtcbiAgICByZXR1cm4gdGhpcy5yZXRyeVN0cmF0ZWd5O1xuICB9XG5cbiAgd2l0aFJldHJ5U3RyYXRlZ3kocmV0cnlTdHJhdGVneTogUmV0cnlTdHJhdGVneSk6IENvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiBuZXcgQ2FjaGVDb25maWd1cmF0aW9uKHtcbiAgICAgIGxvZ2dlckZhY3Rvcnk6IHRoaXMubG9nZ2VyRmFjdG9yeSxcbiAgICAgIHJldHJ5U3RyYXRlZ3k6IHJldHJ5U3RyYXRlZ3ksXG4gICAgICB0cmFuc3BvcnRTdHJhdGVneTogdGhpcy50cmFuc3BvcnRTdHJhdGVneSxcbiAgICAgIG1pZGRsZXdhcmVzOiB0aGlzLm1pZGRsZXdhcmVzLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VHJhbnNwb3J0U3RyYXRlZ3koKTogVHJhbnNwb3J0U3RyYXRlZ3kge1xuICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydFN0cmF0ZWd5O1xuICB9XG5cbiAgd2l0aFRyYW5zcG9ydFN0cmF0ZWd5KHRyYW5zcG9ydFN0cmF0ZWd5OiBUcmFuc3BvcnRTdHJhdGVneSk6IENvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiBuZXcgQ2FjaGVDb25maWd1cmF0aW9uKHtcbiAgICAgIGxvZ2dlckZhY3Rvcnk6IHRoaXMubG9nZ2VyRmFjdG9yeSxcbiAgICAgIHJldHJ5U3RyYXRlZ3k6IHRoaXMucmV0cnlTdHJhdGVneSxcbiAgICAgIHRyYW5zcG9ydFN0cmF0ZWd5OiB0cmFuc3BvcnRTdHJhdGVneSxcbiAgICAgIG1pZGRsZXdhcmVzOiB0aGlzLm1pZGRsZXdhcmVzLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0TWlkZGxld2FyZXMoKTogTWlkZGxld2FyZVtdIHtcbiAgICByZXR1cm4gdGhpcy5taWRkbGV3YXJlcztcbiAgfVxuXG4gIHdpdGhNaWRkbGV3YXJlcyhtaWRkbGV3YXJlczogTWlkZGxld2FyZVtdKTogQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDYWNoZUNvbmZpZ3VyYXRpb24oe1xuICAgICAgbG9nZ2VyRmFjdG9yeTogdGhpcy5sb2dnZXJGYWN0b3J5LFxuICAgICAgcmV0cnlTdHJhdGVneTogdGhpcy5yZXRyeVN0cmF0ZWd5LFxuICAgICAgdHJhbnNwb3J0U3RyYXRlZ3k6IHRoaXMudHJhbnNwb3J0U3RyYXRlZ3ksXG4gICAgICBtaWRkbGV3YXJlczogbWlkZGxld2FyZXMsXG4gICAgfSk7XG4gIH1cblxuICBhZGRNaWRkbGV3YXJlKG1pZGRsZXdhcmU6IE1pZGRsZXdhcmUpOiBDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IENhY2hlQ29uZmlndXJhdGlvbih7XG4gICAgICBsb2dnZXJGYWN0b3J5OiB0aGlzLmxvZ2dlckZhY3RvcnksXG4gICAgICByZXRyeVN0cmF0ZWd5OiB0aGlzLnJldHJ5U3RyYXRlZ3ksXG4gICAgICB0cmFuc3BvcnRTdHJhdGVneTogdGhpcy50cmFuc3BvcnRTdHJhdGVneSxcbiAgICAgIG1pZGRsZXdhcmVzOiBbbWlkZGxld2FyZSwgLi4udGhpcy5taWRkbGV3YXJlc10sXG4gICAgfSk7XG4gIH1cblxuICB3aXRoQ2xpZW50VGltZW91dE1pbGxpcyhjbGllbnRUaW1lb3V0OiBudW1iZXIpOiBDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IENhY2hlQ29uZmlndXJhdGlvbih7XG4gICAgICBsb2dnZXJGYWN0b3J5OiB0aGlzLmxvZ2dlckZhY3RvcnksXG4gICAgICByZXRyeVN0cmF0ZWd5OiB0aGlzLnJldHJ5U3RyYXRlZ3ksXG4gICAgICB0cmFuc3BvcnRTdHJhdGVneTpcbiAgICAgICAgdGhpcy50cmFuc3BvcnRTdHJhdGVneS53aXRoQ2xpZW50VGltZW91dE1pbGxpcyhjbGllbnRUaW1lb3V0KSxcbiAgICAgIG1pZGRsZXdhcmVzOiB0aGlzLm1pZGRsZXdhcmVzLFxuICAgIH0pO1xuICB9XG59XG4iXX0=